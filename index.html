<!DOCTYPE html>
<html>

<head>
	<title>I hear you</title>
	<style>
		body {
			background: #000;
			color: #fff;
			font-family: Arial, sans-serif;
			margin: 0;
			overflow: hidden;
		}

		#danmaku {
			position: fixed;
			top: 150px;
			left: 20px;
			width: 100%;
			height: 100%;
			pointer-events: none;
			color: #fff;
			font-size: 56px;
			font-family: futura;
		}


		#hear {
			position: fixed;
			top: 0px;
			left: 20px;
			width: 100%;
			height: 100%;
			pointer-events: none;
			color: red;
			font-size: 80px;
			font-family: futura;
		}

		#hear2 {
			position: fixed;
			top: 120px;
			left: 20px;
			width: 100%;
			height: 100%;
			pointer-events: none;
			font-size: 40px;
			font-family: futura;
		}

		.danmaku-text {
			position: absolute;
			white-space: nowrap;
			font-size: 36px;

		}
	</style>
</head>

<body>
	<h1 id="hear" style="text-align: center;">I hear you</h1>
	<h2 id="hear2">Thank you for sharing your healthy thoughts and insights!!</h2>
	<div id="danmaku"></div>
	<script>
		const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
		recognition.lang = 'en-US';
		recognition.continuous = true;
		recognition.interimResults = false;

		recognition.onresult = (event) =>
		{
			const transcript = event.results[event.results.length - 1][0].transcript;
			addDanmaku(transcript);
		};

		recognition.onerror = (event) => console.error('Error:', event.error);
		recognition.onend = () => recognition.start();
		function setRandomTextColor(element)
		{
			// Generate random RGB values
			const r = Math.floor(Math.random() * 256);
			const g = Math.floor(Math.random() * 256);
			const b = Math.floor(Math.random() * 256);

			// Ensure the color isn't too close to black (sum of RGB < 50)
			if (r + g + b < 50)
			{
				return setRandomTextColor(element); // Try again if too dark
			}

			// Apply the color to the element
			element.style.color = `rgb(${r}, ${g}, ${b})`;
		}

		// Example usage:


		function addDanmaku(text)
		{
			const danmaku = document.createElement('div');
			danmaku.className = 'danmaku-text';
			danmaku.textContent = text;
			danmaku.style.left = `${Math.random() * (window.innerWidth - 100)}px`;
			danmaku.style.top = `${Math.random() * (window.innerHeight - 50)}px`;
			setRandomTextColor(danmaku);
			document.getElementById('danmaku').appendChild(danmaku);

			const danmakuRoot = document.getElementById('danmaku')
			let count = danmakuRoot.childElementCount;
			if (count > 50)
			{
				danmakuRoot.removeChild(danmakuRoot.firstChild);
			}

			let vx = (Math.random() - 0.5) * 4;
			let vy = (Math.random() - 0.5) * 4;
			const animate = () =>
			{
				let x = parseFloat(danmaku.style.left);
				let y = parseFloat(danmaku.style.top);
				x += vx;
				y += vy;

				if (x <= 0 || x >= window.innerWidth - danmaku.offsetWidth) vx = -vx;
				if (y <= 0 || y >= window.innerHeight - danmaku.offsetHeight) vy = -vy;

				danmaku.style.left = `${x}px`;
				danmaku.style.top = `${y}px`;
				requestAnimationFrame(animate);
			};
			requestAnimationFrame(animate);
		}

		recognition.start();
	</script>
</body>

</html>